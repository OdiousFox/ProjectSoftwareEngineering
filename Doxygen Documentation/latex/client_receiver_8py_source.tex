\hypertarget{client_receiver_8py_source}{}\doxysection{client\+Receiver.\+py}
\label{client_receiver_8py_source}\index{JulianReceiver/clientReceiver.py@{JulianReceiver/clientReceiver.py}}
\mbox{\hyperlink{client_receiver_8py}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{\Hypertarget{client_receiver_8py_source_l00001}\mbox{\hyperlink{namespaceclient_receiver}{00001}}\ \textcolor{keyword}{import}\ paho.mqtt.client\ \textcolor{keyword}{as}\ mqtt}
\DoxyCodeLine{\Hypertarget{client_receiver_8py_source_l00002}00002\ \textcolor{keyword}{import}\ time}
\DoxyCodeLine{\Hypertarget{client_receiver_8py_source_l00003}00003\ }
\DoxyCodeLine{\Hypertarget{client_receiver_8py_source_l00004}00004\ \textcolor{keyword}{import}\ messageFormatter}
\DoxyCodeLine{\Hypertarget{client_receiver_8py_source_l00005}00005\ }
\DoxyCodeLine{\Hypertarget{client_receiver_8py_source_l00006}00006\ }
\DoxyCodeLine{\Hypertarget{client_receiver_8py_source_l00007}\mbox{\hyperlink{namespaceclient_receiver_a5aa9f48e1c2f5787b2ccb8a9e3c144ce}{00007}}\ \textcolor{keyword}{def\ }client():}
\DoxyCodeLine{\Hypertarget{client_receiver_8py_source_l00008}00008\ \ \ \ \ username\ =\ \textcolor{stringliteral}{"{}project-\/software-\/engineering@ttn"{}}}
\DoxyCodeLine{\Hypertarget{client_receiver_8py_source_l00009}00009\ \ \ \ \ password\ =\ \textcolor{stringliteral}{"{}NNSXS.DTT4HTNBXEQDZ4QYU6SG73Q2OXCERCZ6574RVXI.CQE6IG6FYNJOO2MOFMXZVWZE4GXTCC2YXNQNFDLQL4APZMWU6ZGA"{}}}
\DoxyCodeLine{\Hypertarget{client_receiver_8py_source_l00010}00010\ }
\DoxyCodeLine{\Hypertarget{client_receiver_8py_source_l00011}00011\ \ \ \ \ \textcolor{comment}{\#\ The\ callback\ for\ when\ the\ client\ receives\ a\ CONNACK\ response\ from\ the\ server.}}
\DoxyCodeLine{\Hypertarget{client_receiver_8py_source_l00012}00012\ \ \ \ \ \textcolor{keyword}{def\ }on\_connect(client,\ userdata,\ flags,\ rc):}
\DoxyCodeLine{\Hypertarget{client_receiver_8py_source_l00013}00013\ \ \ \ \ \ \ \ \ print(\textcolor{stringliteral}{"{}Connected\ with\ result\ code\ "{}}\ +\ str(rc))}
\DoxyCodeLine{\Hypertarget{client_receiver_8py_source_l00014}00014\ }
\DoxyCodeLine{\Hypertarget{client_receiver_8py_source_l00015}00015\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Subscribing\ in\ on\_connect()\ means\ that\ if\ we\ lose\ the\ connection\ and}}
\DoxyCodeLine{\Hypertarget{client_receiver_8py_source_l00016}00016\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ reconnect\ then\ subscriptions\ will\ be\ renewed.}}
\DoxyCodeLine{\Hypertarget{client_receiver_8py_source_l00017}00017\ \ \ \ \ \ \ \ \ client.subscribe(\textcolor{stringliteral}{"{}extapi/data/esm"{}})}
\DoxyCodeLine{\Hypertarget{client_receiver_8py_source_l00018}00018\ }
\DoxyCodeLine{\Hypertarget{client_receiver_8py_source_l00019}00019\ \ \ \ \ \textcolor{comment}{\#\ The\ callback\ for\ when\ a\ PUBLISH\ message\ is\ received\ from\ the\ server.}}
\DoxyCodeLine{\Hypertarget{client_receiver_8py_source_l00020}00020\ \ \ \ \ \textcolor{keyword}{def\ }on\_message(client,\ userdata,\ msg):}
\DoxyCodeLine{\Hypertarget{client_receiver_8py_source_l00021}00021\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacemessage_formatter_a3c77723c693ea7180c74a3fca7a1f173}{messageFormatter.formatMessage}}(msg.payload)}
\DoxyCodeLine{\Hypertarget{client_receiver_8py_source_l00022}00022\ }
\DoxyCodeLine{\Hypertarget{client_receiver_8py_source_l00023}00023\ \ \ \ \ \textcolor{keyword}{def\ }on\_log(client,\ userdata,\ level,\ buf):}
\DoxyCodeLine{\Hypertarget{client_receiver_8py_source_l00024}00024\ \ \ \ \ \ \ \ \ print(\textcolor{stringliteral}{"{}log:\ "{}},\ buf)}
\DoxyCodeLine{\Hypertarget{client_receiver_8py_source_l00025}00025\ }
\DoxyCodeLine{\Hypertarget{client_receiver_8py_source_l00026}00026\ \ \ \ \ client\ =\ mqtt.Client()}
\DoxyCodeLine{\Hypertarget{client_receiver_8py_source_l00027}00027\ \ \ \ \ client.on\_connect\ =\ on\_connect}
\DoxyCodeLine{\Hypertarget{client_receiver_8py_source_l00028}00028\ \ \ \ \ client.on\_message\ =\ on\_message}
\DoxyCodeLine{\Hypertarget{client_receiver_8py_source_l00029}00029\ \ \ \ \ \textcolor{comment}{\#\ client.on\_log\ =\ on\_log}}
\DoxyCodeLine{\Hypertarget{client_receiver_8py_source_l00030}00030\ \ \ \ \ client.username\_pw\_set(username,\ password)}
\DoxyCodeLine{\Hypertarget{client_receiver_8py_source_l00031}00031\ }
\DoxyCodeLine{\Hypertarget{client_receiver_8py_source_l00032}00032\ \ \ \ \ client.connect(\textcolor{stringliteral}{"{}eu1.cloud.thethings.network"{}},\ 1883,\ 60)}
\DoxyCodeLine{\Hypertarget{client_receiver_8py_source_l00033}00033\ }
\DoxyCodeLine{\Hypertarget{client_receiver_8py_source_l00034}00034\ \ \ \ \ client.loop\_start()}
\DoxyCodeLine{\Hypertarget{client_receiver_8py_source_l00035}00035\ \ \ \ \ client.subscribe(\textcolor{stringliteral}{"{}\#"{}})}
\DoxyCodeLine{\Hypertarget{client_receiver_8py_source_l00036}00036\ \ \ \ \ time.sleep(1000)}
\DoxyCodeLine{\Hypertarget{client_receiver_8py_source_l00037}00037\ }
\DoxyCodeLine{\Hypertarget{client_receiver_8py_source_l00038}00038\ \ \ \ \ client.loop\_stop()}
\DoxyCodeLine{\Hypertarget{client_receiver_8py_source_l00039}00039\ \textcolor{comment}{\#\ client.loop\_start()}}
\DoxyCodeLine{\Hypertarget{client_receiver_8py_source_l00040}00040\ \textcolor{comment}{\#}}
\DoxyCodeLine{\Hypertarget{client_receiver_8py_source_l00041}00041\ \textcolor{comment}{\#\ time.sleep(30)}}
\DoxyCodeLine{\Hypertarget{client_receiver_8py_source_l00042}00042\ \textcolor{comment}{\#\ client.loop\_stop()}}

\end{DoxyCode}
